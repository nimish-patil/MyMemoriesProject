(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{141:function(e,t,a){},144:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),i=a(16),o=a(190),s=a(191),u=a(185),m=a(195),p=a(189),d=a(79),f=a.n(d),g=a(25),b=a(177),v=Object(b.a)({media:{height:0,paddingTop:"56.25%",backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundBlendMode:"darken"},border:{border:"solid"},fullHeightCard:{height:"100%"},card:{display:"flex",flexDirection:"column",justifyContent:"space-between",borderRadius:"15px",height:"100%",position:"relative"},overlay:{position:"absolute",top:"20px",left:"20px",color:"white"},overlay2:{position:"absolute",top:"20px",right:"20px",color:"white"},grid:{display:"flex"},details:{display:"flex",justifyContent:"space-between",margin:"20px"},title:{padding:"0 16px"},cardActions:{display:"flex",justifyContent:"space-between",padding:"0 16px 8px 16px"}}),E=a(181),h=a(184),y=a(194),x=a(186),j=a(187),C=a(88),O=a.n(C),w=a(87),k=a.n(w),I=a(89),N=a.n(I),T=a(84),_=a.n(T),A=a(23),S=a.n(A),D=a(44),z=a(45),F=a.n(z),B="https://nimish-memories-project.herokuapp.com/posts",L=function(e){return function(){var t=Object(D.a)(S.a.mark(function t(a){var n,r;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(e),t.next=4,c=e,F.a.patch("".concat(B,"/").concat(c._id),c);case 4:n=t.sent,r=n.data,a({type:"UPDATE",payload:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0.message);case 12:case"end":return t.stop()}var c},t,null,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()},W=a(20),M=function(e){var t=e.post,a=(e.currentId,e.setCurrentId),n=v(),c=Object(W.b)();return r.a.createElement(E.a,{className:n.card},r.a.createElement(h.a,{className:n.media,image:t.selectedFile,title:t.title}),r.a.createElement("div",{className:n.overlay},r.a.createElement(u.a,{variant:"h6"},t.creator),r.a.createElement(u.a,{variant:"body2"},_()(t.createdAt).fromNow())),r.a.createElement("div",{className:n.overlay2},r.a.createElement(y.a,{style:{color:"white"},size:"small",onClick:function(){return a(t._id)}},r.a.createElement(k.a,{fontSize:"default"}))),r.a.createElement("div",{className:n.details},r.a.createElement(u.a,{variant:"body2",color:"textSecondary"},t.tags.map(function(e){return"#".concat(e," ")}))),r.a.createElement(u.a,{className:n.title,gutterBottom:!0,variant:"h5"},t.title),r.a.createElement(x.a,null,r.a.createElement(u.a,{gutterBottom:!0,variant:"body2",color:"textSecondary"},t.message)),r.a.createElement(j.a,{className:n.cardActions},r.a.createElement(y.a,{size:"small",color:"primary",onClick:function(){return c(L(Object(g.a)({},t,{likeCount:t.likeCount+1})))}},r.a.createElement(O.a,{size:"small"})," \xa0 ",t.likeCount),r.a.createElement(y.a,{size:"small",color:"secondary",onClick:function(){return c(function(e){return function(){var t=Object(D.a)(S.a.mark(function t(a){return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n=e._id,F.a.delete("".concat(B,"/").concat(n));case 3:a({type:"DELETE",payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0.message);case 9:case"end":return t.stop()}var n},t,null,[[0,6]])}));return function(e){return t.apply(this,arguments)}}()}(t))}},r.a.createElement(N.a,{size:"small"}))))},R=a(188),H=Object(b.a)(function(e){return{mainContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},smMargin:{margin:e.spacing(1)},actionDiv:{textAlign:"center"}}}),J=function(e){var t=e.currentId,a=e.setCurrentId,n=Object(W.c)(function(e){return e.posts}),c=H();return console.log(n),n.length?r.a.createElement(p.a,{className:c.container,container:!0,alignItems:"stretch",spacing:3},n.map(function(e){return r.a.createElement(p.a,{item:!0,key:e._id,xa:12,sm:6},r.a.createElement(M,{post:e,currentId:t,setCurrentId:a}))})):r.a.createElement(R.a,null)},P=Object(b.a)(function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1)}},paper:{padding:e.spacing(2)},form:{display:"flex",flexWrap:"wrap",justifyContent:"center"},fileInput:{width:"97%",margin:"10px 0"},buttonSubmit:{marginBottom:10}}}),U=a(182),V=a(192),q=a(90),G=a.n(q),K=function(e){var t=e.currentId,a=e.setCurrentId,c=P(),l=Object(W.b)(),o=Object(n.useState)({creator:"",title:"",message:"",tags:"",selectedFile:""}),s=Object(i.a)(o,2),m=s[0],p=s[1],d=Object(W.c)(function(e){return t?e.posts.find(function(e){return e._id===t}):null});Object(n.useEffect)(function(){d&&p(d)},[d]);var f=function(){a(null),p({creator:"",title:"",message:"",tags:"",selectedFile:""})};return r.a.createElement(U.a,{className:c.paper},r.a.createElement("form",{className:"".concat(c.form," ").concat(c.root),autoComplete:"off",noValidate:!0,onSubmit:function(e){var a;e.preventDefault(),l(t?L(m):(a=m,function(){var e=Object(D.a)(S.a.mark(function e(t){var n,r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c=a,F.a.post(B,c);case 3:n=e.sent,r=n.data,t({type:"CREATE",payload:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}var c},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}())),f()}},r.a.createElement(u.a,{variant:"h6",className:""},t?"Editing":"Creating"," a memory"),r.a.createElement(V.a,{name:"creator",variant:"outlined",label:"Creator",fullWidth:!0,value:m.creator,onChange:function(e){return p(Object(g.a)({},m,{creator:e.target.value}))}}),r.a.createElement(V.a,{name:"title",variant:"outlined",label:"Title",fullWidth:!0,value:m.title,onChange:function(e){return p(Object(g.a)({},m,{title:e.target.value}))}}),r.a.createElement(V.a,{name:"message",variant:"outlined",label:"Message",fullWidth:!0,value:m.message,onChange:function(e){return p(Object(g.a)({},m,{message:e.target.value}))}}),r.a.createElement(V.a,{name:"tags",variant:"outlined",label:"Tags",fullWidth:!0,value:m.tags,onChange:function(e){return p(Object(g.a)({},m,{tags:e.target.value.split(",")}))}}),r.a.createElement("div",{className:c.fileInput},r.a.createElement(G.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64;return p(Object(g.a)({},m,{selectedFile:t}))}})),r.a.createElement(y.a,{className:c.buttonSubmit,variant:"contained",color:"primary",size:"large",type:"submit",fullWidth:!0},"Submit"),r.a.createElement(y.a,{className:c.buttonSubmit,variant:"contained",color:"secondary",size:"small",onClick:f,fullWidth:!0},"clear")))},Q=Object(b.a)(function(){return{appBar:{borderRadius:15,margin:"30px 0",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},heading:{color:"rgba(0,183,255, 1)"},image:{marginLeft:"15px"}}}),X=function(){var e=Object(W.b)(),t=Q(),a=Object(n.useState)(null),c=Object(i.a)(a,2),l=c[0],d=c[1];return Object(n.useEffect)(function(){console.log("use effect triggered"),e(function(){var e=Object(D.a)(S.a.mark(function e(t){var a,n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get(B);case 3:a=e.sent,n=a.data,t({type:"FETCH_ALL",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}())},[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{maxwidth:"lg"},r.a.createElement(s.a,{className:t.appBar,color:"inherit",position:"static"},r.a.createElement(u.a,{variant:"h2",className:t.heading,align:"center"},"Memories"),r.a.createElement("img",{src:f.a,className:t.image,alt:"memories",height:"60"})),r.a.createElement(m.a,{in:!0},r.a.createElement(o.a,null,r.a.createElement(p.a,{container:!0,justify:"space-between",alignItems:"stretch",spacing:3},r.a.createElement(p.a,{item:!0,xs:12,sm:7},r.a.createElement(J,{currentId:l,setCurrentId:d})),r.a.createElement(p.a,{item:!0,xs:12,sm:4},r.a.createElement(K,{currentId:l,setCurrentId:d})))))))},Y=a(40),Z=a(91),$=a(18),ee=Object(Y.b)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ALL":return t.payload;case"CREATE":return[].concat(Object($.a)(e),[t.payload]);case"UPDATE":return e.map(function(e){return e._id===t.payload._id?t.payload:e});case"DELETE":return e.filter(function(e){return e._id!==t.payload._id});default:return e}}}),te=(a(141),Object(Y.d)(ee,Object(Y.c)(Object(Y.a)(Z.a))));l.a.render(r.a.createElement(W.a,{store:te},r.a.createElement(X,null)),document.getElementById("root"))},79:function(e,t,a){e.exports=a.p+"static/media/memories.5c0c63fb.png"},99:function(e,t,a){e.exports=a(144)}},[[99,2,1]]]);
//# sourceMappingURL=main.d542ade4.chunk.js.map